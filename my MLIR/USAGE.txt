PREFIX:		PS C:\Users\p60113046-bz>



(Get-Command gcc).Source
	C:\ProgramData\mingw64\mingw64\bin\gcc.exe

(Get-Command clang).Source
	C:\Program Files\LLVM\bin\clang.exe

(Get-Command llc).Source
	C:\Users\p60113046-bz\AppData\Local\Programs\Python\Python314\Lib\site-packages\mlir\bin\llc.exe



PREFIX:		PS C:\Users\p60113046-bz\Desktop\my MLIR>



llc -filetype=obj --relocation-model=pic simple.ll -o build/simple.o

clang -shared -fPIC build/simple.o --target=x86_64-w64-mingw32 -o build/libsimple.dll

clang build/simple.o --target=x86_64-w64-mingw32 -o build/simple

build\simple
$LASTEXITCODE
	42



objdump -p build\libsimple.dll
	build\libsimple.dll:     file format pei-x86-64
	Characteristics 0x2026
		executable
		line numbers stripped
		large address aware
		DLL		

objdump -p build\simple.exe
	build\simple.exe:     file format pei-x86-64
	Characteristics 0x26
		executable
		line numbers stripped
		large address aware

Linux:   -fPIC –¥–ª—è .so  ‚Üí –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
Windows: -fPIC –¥–ª—è .dll ‚Üí –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è



mlir-opt example.mlir --convert-func-to-llvm --convert-math-to-llvm --convert-index-to-llvm --convert-scf-to-cf --convert-cf-to-llvm --convert-arith-to-llvm --reconcile-unrealized-casts -o example_opt.mlir

mlir-cpu-runner -e main -entry-point-result=i32 simple_opt.mlir
	mlir-cpu-runner : –ò–º—è "mlir-cpu-runner" –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–æ –∫–∞–∫ –∏–º—è –∫–æ–º–∞–Ω–¥–ª–µ—Ç–∞, —Ñ—É–Ω–∫—Ü–∏–∏, —Ñ–∞–π–ª–∞ —Å—Ü–µ–Ω–∞—Ä–∏—è –∏–ª–∏ –≤—ã–ø–æ–ª–Ω—è–µ–º–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∏–º–µ–Ω–∏, –∞ —Ç–∞–∫–∂–µ –Ω–∞–ª–∏—á–∏–µ –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –ø—É—Ç–∏, –ø–æ—Å–ª–µ —á–µ–≥–æ –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–æ–ø—ã—Ç–∫—É.

# üß© –ü–æ—á–µ–º—É —É —Ç–µ–±—è –Ω–µ—Ç `mlir-cpu-runner`
–ü–æ—Ç–æ–º—É —á—Ç–æ:
### **1. mlir-cpu-runner –∑–∞–≤–∏—Å–∏—Ç –æ—Ç ORC JIT –∏ ExecutionEngine**
–ê —ç—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã LLVM **–Ω–µ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –ø–æ–¥ Windows** –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ –±–∏–Ω–∞—Ä–Ω—ã—Ö —Å–±–æ—Ä–æ–∫, –≤–∫–ª—é—á–∞—è:
- –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ LLVM —Ä–µ–ª–∏–∑—ã
- mlir-wheels
- conda-forge
- vcpkg
–ü—Ä–∏—á–∏–Ω–∞:  
ExecutionEngine –∏—Å–ø–æ–ª—å–∑—É–µ—Ç POSIX‚Äë–º–µ—Ö–∞–Ω–∏–∑–º—ã (mmap, dlopen, dlsym), –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ Windows.
---
### **2. mlir-cpu-runner –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ Linux –∏ macOS**
–≠—Ç–æ –ø—Ä—è–º–æ —É–∫–∞–∑–∞–Ω–æ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ LLVM MLIR:
> The CPU runner is only supported on Unix-like platforms.
---
### **3. makslevental/mlir-wheels –Ω–µ –≤–∫–ª—é—á–∞–µ—Ç mlir-cpu-runner**
–ü–æ—Ç–æ–º—É —á—Ç–æ:
- –æ–Ω —Å–æ–±–∏—Ä–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ —Å–æ–±—Ä–∞—Ç—å –ø–æ–¥ Windows
- ExecutionEngine –∏ JIT –Ω–µ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è ‚Üí cpu-runner –Ω–µ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è
---
# üéØ –ò—Ç–æ–≥: –ø–æ–¥ Windows `mlir-cpu-runner` –ù–ï —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
–ò —Ç—ã –Ω–∏—á–µ–≥–æ –Ω–µ —Å–¥–µ–ª–∞–ª –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ ‚Äî –µ–≥–æ –ø—Ä–æ—Å—Ç–æ –Ω–µ—Ç.



mlir-translate example_opt.mlir -mlir-to-llvmir -o example.ll
llc -filetype=obj --relocation-model=pic example.ll -o build/example.o
clang build/example.o --target=x86_64-w64-mingw32 -o build/example

build/example
$LASTEXITCODE
	45
